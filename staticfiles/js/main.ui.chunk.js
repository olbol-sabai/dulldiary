(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{115:function(e,t,n){e.exports={Container:"login_Container__2fstt"}},116:function(e,t,n){e.exports={Spinner:"Spinner_Spinner__1021L","lds-dual-ring":"Spinner_lds-dual-ring__32Bns"}},123:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),s=n(24),i=n.n(s),o=(n(123),n(10)),l=n.n(o),u=n(16),d=n(7),j=(n(125),n(126),n(9)),b=n(3),h=n(42),p=n(25),f=n.n(p),O=n(11),m=Object(c.createContext)(),x="SET_TOKEN",g="ADD_ENTRIES",v="CLEAR_ENTRIES",y="ENTRY_MODAL_SHOWING",w="SET_EDIT_ENTRY",k="CU_SINGLE_ENTRY",S="EDIT_ENTRY_STATS",E="DELETE_ENTRY",C="SET_PROFILE_DATA",_=function(e){return{type:x,token:e}},N=n(13),T=Object(N.b)(null,(function(e){return{setToken:function(t){return e(_(t))}}}))(Object(O.h)((function(e){var t=e.setToken,n=e.history,s=Object(c.useContext)(m),i=(s.contextValue,s.setContextValue),o=Object(h.useGoogleLogin)({onSuccess:function(e){var r={profileObj:e.profileObj,tokenObj:e.tokenObj,provider:"google"};f.a.post("http://dulldiary-dev.eu-west-2.elasticbeanstalk.com/api/auth/google_auth/",r).then((function(e){var r;r=e.data,i({refreshToken:r.refresh,email:r.email,username:r.username,expires:r.expires,validated:r.validated,provider:"google"}),t(r.access),localStorage.setItem("refresh_token",r.refresh),localStorage.setItem("refresh_expires",r.expires),n.push({pathname:"/entries"})})).catch((function(e){return console.log(e)}))},clientId:"106189049607-3rhlmgu5rmvsnr8kf7fnh3vvs8hts08l.apps.googleusercontent.com",isSignedIn:!1,onFailure:function(e){console.log(e)}}),l=o.signIn;o.loaded;return Object(r.jsx)(a.a.Fragment,{children:Object(r.jsx)(b.c,{className:"mt-3 align-self-center",onClick:function(){return l()},children:"Sign In With Google"})})}))),A=n(115),M=n.n(A),z=n(116),I=n.n(z),B=function(e){var t=e.style;return Object(r.jsx)("div",{className:I.a.Spinner,style:t})},F=n(55),D=f.a.create({baseURL:"http://dulldiary-dev.eu-west-2.elasticbeanstalk.com/"}),U=function(e){e.time;var t=e.theme,n=e.message,a=e.block,s=e.style,i=e.children,o=Object(c.useState)(!1),l=Object(d.a)(o,2),u=l[0],j=l[1];return Object(r.jsxs)(b.a,{onClick:function(){return j(!0)},className:"mb-3",open:!u,theme:t,block:a,style:s,children:[n,i]})},L="http://dulldiary-dev.eu-west-2.elasticbeanstalk.com/",q=Object(N.b)(null,(function(e){return{setToken:function(t){return e(_(t))}}}))((function(e){var t=e.setToken,n=function(e){var t=Object(c.useState)(e),n=Object(d.a)(t,2),r=n[0],a=n[1];return[r,function(e){return a((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(F.a)({},e.target.name,e.target.value))}))}]}({password:"",password2:"",email:""}),a=Object(d.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(!0),h=Object(d.a)(o,2),p=h[0],x=h[1],g=Object(c.useState)(!1),v=Object(d.a)(g,2),y=v[0],w=v[1],k=Object(c.useState)(!1),S=Object(d.a)(k,2),E=S[0],C=S[1],_=Object(c.useContext)(m),N=(_.contextValue,_.setContextValue),A=Object(c.useState)(""),z=Object(d.a)(A,2),I=z[0],D=z[1],q=Object(c.useState)(!1),R=Object(d.a)(q,2),Q=R[0],X=R[1],P=Object(c.useRef)(null),J=function(e){N({refreshToken:e.refresh,username:e.username,email:e.email,image:e.image,expires:e.expires,validated:e.validated,provider:"django"}),t(e.access),localStorage.setItem("refresh_token",e.refresh),localStorage.setItem("refresh_expires",e.expires),X(!1),e.validated?w(!0):C(!0)};Object(c.useEffect)((function(){P.current.focus()}),[p]),Object(c.useEffect)((function(){return P.current.focus(),null!==localStorage.getItem("refresh_token")&&(X(!0),f.a.post(L+"api/auth/refresh/",{refresh:localStorage.getItem("refresh_token")}).then((function(e){return"invalid token"===e.data?(localStorage.removeItem("refresh_token"),localStorage.removeItem("refresh_expires"),void X(!1)):J(e.data)})).catch((function(e){X(!1),localStorage.removeItem("refresh_token")}))),function(){return X(!1)}}),[]);var G=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),D([]),e.prev=2,e.next=5,f.a.post(L+"api/auth/login/",{email:s.email,password:s.password});case 5:t=e.sent,J(t.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response),D(e.t0.response.data.detail);case 13:X(!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),D([]),e.prev=2,e.next=5,f.a.post(L+"api/auth/register/",{email:s.email,password:s.password,password2:s.password2},{headers:{Authorization:null}});case 5:(t=e.sent).data.detail.includes("You have signed up")&&(C(!0),N((function(e){return Object(j.a)(Object(j.a)({},e),{},{email:t.data.email})})),localStorage.setItem("refresh_token",t.data.refresh)),e.next=12;break;case 9:for(n in e.prev=9,e.t0=e.catch(2),e.t0.response.data)D(e.t0.response.data[n][0]);case 12:X(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:M.a.Container,children:[y?Object(r.jsx)(O.a,{to:"/entries?redirected=login"}):null,E?Object(r.jsx)(O.a,{to:"/validate"}):null,Object(r.jsx)(b.q,{onSubmit:function(e){e.preventDefault()},children:Object(r.jsxs)(b.l,{children:[Object(r.jsxs)(b.z,{children:[Object(r.jsx)(b.j,{sm:{size:8,order:2,offset:2},children:Object(r.jsx)(b.r,{innerRef:P,className:"mt-3",name:"email",placeholder:"Email",value:s.email,onChange:i})}),Object(r.jsx)(b.j,{sm:{size:8,order:2,offset:2},children:Object(r.jsx)(b.r,{value:s.password,name:"password",onChange:i,type:"password",className:"mt-3",placeholder:"Password"})}),p?null:Object(r.jsx)(b.j,{sm:{size:8,order:2,offset:2},children:Object(r.jsx)(b.r,{type:"password",value:s.password2,name:"password2",className:"mt-3",placeholder:"Password",onChange:i})}),Object(r.jsx)(b.j,{className:"d-flex justify-content-center",sm:{size:8,order:2,offset:2},children:Object(r.jsxs)(b.d,{children:[Object(r.jsxs)(b.c,{type:p?"submit":"click",onClick:p?G:function(){return x(!0)},className:"mt-3",block:!0,pill:!0,outline:!0,theme:"primary",children:["SignIn ",p?null:"Here"]}),Object(r.jsxs)(b.c,{type:p?"click":"submit",onClick:p?function(){return x(!1)}:Y,className:"mt-3",block:!0,pill:!0,outline:!0,theme:"primary",children:["Register ",p?"Here":null]})]})}),Object(r.jsx)(b.j,{className:"d-flex justify-content-center",sm:{size:8,order:2,offset:2},children:y?Object(r.jsx)(O.a,{to:"/entries"}):Object(r.jsx)(T,{setToken:t})})]}),Object(r.jsx)("div",{className:"mt-5",children:Q?Object(r.jsx)(B,{}):I?Object(r.jsx)(U,{block:!0,theme:"warning",message:I,style:{margin:"auto"}}):null})]})})]})})),R=n(17),Q=n(18),X=function(){return{type:y}},P=function(e){return{type:w,entry:e}},J=n(48),G=a.a.memo((function(e){var t=e.entry,n=e.deleteEntryFromStore,a=e.username,s=e.email,i=e.entryModalToggle,o=e.setModalEditData,j=e.editEntryStats,h=Object(c.useState)(!1),p=Object(d.a)(h,2),f=p[0],O=p[1],m=Object(c.useState)(!1),x=Object(d.a)(m,2),g=x[0],v=x[1],y=Object(c.useState)(!1),w=Object(d.a)(y,2),k=w[0],S=w[1],E=Object(c.useState)(!1),C=Object(d.a)(E,2),_=C[0],N=C[1];Object(c.useEffect)((function(){return function(){return O(!1)}}),[]);var T,A=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.delete("api/entries/".concat(t.id,"/"),{credentials:"include"});case 3:e.sent,O(!1),n(t.id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},"appreciated"===t?r.appreciated_entries=n:r.changed_perception=n,e.prev=2,e.next=5,D.patch("api/users/".concat(a||s,"/"),r);case 5:e.sent,j(t,n),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}();return T=t.content.length>110?Object(r.jsxs)(r.Fragment,{children:[g?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(b.k,{open:g,children:Object(r.jsx)("p",{children:t.content})})}):Object(r.jsxs)("p",{children:[t.content.slice(0,110),"..."]}),Object(r.jsx)(b.c,{className:"p-1",size:"xs",onClick:function(){return v((function(e){return!e}))},children:g?"Hide":"Read More"})]}):Object(r.jsx)("p",{children:t.content}),Object(r.jsx)(b.j,{md:"12",children:Object(r.jsxs)(b.f,{style:{maxWidth:"300px"},className:"mx-auto my-3",children:[Object(r.jsxs)(b.i,{className:"d-flex align-items-center justify-content-between",children:[t.user_country?Object(r.jsx)(J.a,{countryCode:t.user_country,svg:!0,style:{fontSize:"2em",lineHeight:"2em"}}):null,Object(r.jsxs)(b.j,{children:[Object(r.jsx)(b.z,{className:"justify-content-center",children:Object(r.jsx)("h6",{children:t.created})}),Object(r.jsx)(b.z,{className:"justify-content-center",children:t.user===s?f?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.c,{outline:!0,theme:"dark",size:"sm",onClick:function(){return O(!1)},children:Object(r.jsx)(R.a,{icon:Q.g})}),Object(r.jsx)(b.c,{outline:!0,theme:"dark",className:"ml-1",size:"sm",onClick:A,children:Object(r.jsx)(R.a,{icon:Q.b})}),Object(r.jsx)("p",{children:"Delete?"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.c,{size:"sm",onClick:function(){i(),o(t)},children:Object(r.jsx)(R.a,{icon:Q.c})}),Object(r.jsx)(b.c,{theme:"danger",className:"ml-1",size:"sm",onClick:function(){return O(!0)},children:Object(r.jsx)(R.a,{icon:Q.h})})]}):null})]})]}),Object(r.jsx)(b.g,{children:Object(r.jsx)(b.z,{className:"d-flex flex-row",children:T})}),Object(r.jsx)(b.h,{children:Object(r.jsxs)(b.z,{children:[Object(r.jsxs)(b.j,{children:[Object(r.jsxs)(b.c,{id:"appreciated".concat(t.id),onClick:function(){return M("appreciated",t.id)},outline:!0,theme:t.stats.is_appreciated_by_user?"success":"warning",children:[Object(r.jsx)(R.a,{icon:Q.d}),t.stats.appreciated_count]}),Object(r.jsx)(b.A,{open:k,target:"#appreciated".concat(t.id),toggle:function(){return S((function(e){return!e}))},children:t.stats.is_appreciated_by_user?"Remove from appreciate":"Appreciate"})]}),Object(r.jsxs)(b.j,{children:[Object(r.jsxs)(b.c,{id:"perception".concat(t.id),onClick:function(){return M("perception",t.id)},outline:!0,theme:t.stats.changed_perc_of_user?"success":"warning",children:[Object(r.jsx)(R.a,{icon:Q.a}),t.stats.changed_perceptions_count]}),Object(r.jsx)(b.A,{open:_,target:"#perception".concat(t.id),toggle:function(){return N((function(e){return!e}))},children:t.stats.changed_perc_of_user?"Remove from changed perception":"This post changed my perception"})]})]})})]})})})),Y=Object(N.b)(null,(function(e){return{entryModalToggle:function(){return e(X())},deleteEntryFromStore:function(t){return e(function(e){return{type:E,id:e}}(t))},setModalEditData:function(t){return e(P(t))},editEntryStats:function(t,n){return e(function(e,t){return{type:S,statType:e,id:t}}(t,n))}}}))(G),V=Object(N.b)((function(e){return{entries:e.entry.loadedEntries}}),(function(e){return{addEntry:function(t){return e(function(e){return{type:g,data:e}}(t))},clearEntries:function(){return e({type:v})}}}))(Object(O.h)((function(e){var t=e.addEntry,n=e.entries,s=e.clearEntries,i=Object(c.useState)("api/entries/"),o=Object(d.a)(i,2),l=o[0],u=o[1],j=Object(c.useState)(!1),h=Object(d.a)(j,2),p=h[0],f=h[1],O=Object(c.useContext)(m),x=O.contextValue,g=(O.setContextValue,Object(c.useRef)()),v=function(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),r=n[0],a=n[1];return[function(){if(e.current){var t=window.innerHeight||document.documentElement.clientHeight,n=e.current.getBoundingClientRect().top;a(n-t<30)}},r,a]}(g),y=Object(d.a)(v,3),w=y[0],k=y[1],S=y[2];Object(c.useEffect)((function(){return function(){document.removeEventListener("scroll",w),s()}}),[]),Object(c.useEffect)((function(){n.length<3&&x.email&&E()}),[x.email,n]),Object(c.useEffect)((function(){window.addEventListener("scroll",w)}),[g,k]),Object(c.useEffect)((function(){if(k&&l&&!p){var e=setTimeout((function(){E(l)}),1e3);return function(){return clearTimeout(e)}}}),[k,l]);var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"api/entries/";D.get(e).then((function(e){try{t(e.data.results),e.data.next?u(e.data.next):f(!0)}catch(n){}S(!1)})).catch((function(e){}))};return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)(b.l,{fluid:!0,children:Object(r.jsx)(b.z,{className:"m-auto justify-content-center align-items-center",children:n||0!==n.length?n.filter((function(e){return null!==e})).map((function(e,t){return Object(r.jsx)(Y,{entry:e,username:x.username,email:x.email},t)})):Object(r.jsx)(B,{})})}),Object(r.jsx)("div",{ref:g,style:{height:"20px"}}),k&&!p?Object(r.jsx)(B,{}):null,Object(r.jsx)(b.c,{onClick:function(){return E(l)},theme:"primary",size:"sm",style:{margin:"auto"},disabled:p,children:p?"All content loaded":"Load More"})]})}))),H=Object(N.b)(null,(function(e){return{setToken:function(t){return e(_(t))}}}))(Object(O.h)((function(e){var t=e.history,n=e.setToken,a=Object(c.useContext)(m),s=(a.userContext,a.setContextValue);return Object(r.jsx)(b.c,{block:!0,onClick:function(){localStorage.removeItem("refresh_token"),localStorage.removeItem("refresh_expires"),s({refreshToken:null,email:null,validated:null,expires:null,provider:null,image:null}),n(null),t.push({pathname:"/login"})},children:"SignOut"})}))),W=a.a.memo((function(e){var t=e.setToken,n=Object(c.useContext)(m),s=(n._,n.setContextValue),i=Object(h.useGoogleLogout)({onLogoutSuccess:function(e){localStorage.removeItem("refresh_token"),localStorage.removeItem("refresh_expires"),s({refreshToken:null,email:null,validated:null,expires:null,provider:null}),t(null)},clientId:"106189049607-3rhlmgu5rmvsnr8kf7fnh3vvs8hts08l.apps.googleusercontent.com"}).signOut;return Object(r.jsx)(a.a.Fragment,{children:Object(r.jsx)(b.c,{block:!0,onClick:i,children:"SignOut"})})})),Z=Object(N.b)(null,(function(e){return{setToken:function(t){return e(_(t))}}}))(Object(O.h)(W)),K=n(33),$=n(64),ee=n.n($),te=Object(N.b)((function(e){return{entryModalShowing:e.profile.entryModalShowing}}),(function(e){return{setModalEditData:function(t){return e(P(t))},entryModalToggle:function(){return e(X())}}}))((function(e){e.entryModalShowing;var t=e.entryModalToggle,n=e.setModalEditData,a=Object(c.useContext)(m).contextValue,s=Object(c.useState)(!1),i=Object(d.a)(s,2),o=i[0],l=i[1];return Object(r.jsx)(b.l,{fluid:!0,className:ee.a.MainNav,children:Object(r.jsx)("div",{className:ee.a.InnerNav,children:Object(r.jsxs)("nav",{className:"d-flex justify-content-between align-items-center",children:[Object(r.jsx)(K.b,{to:"/about",children:Object(r.jsx)(b.b,{className:ee.a.Badge,children:Object(r.jsx)("img",{src:"data:image/png;base64,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",alt:"DDLOGO",height:"40px"})})}),Object(r.jsx)(K.b,{to:"/entries",children:Object(r.jsx)(b.c,{outline:!0,children:Object(r.jsx)(R.a,{icon:Q.e})})}),Object(r.jsx)(b.c,{outline:!0,onClick:function(){t(),n("clear")},children:Object(r.jsx)(R.a,{icon:Q.f})}),Object(r.jsxs)(b.m,{open:o,toggle:function(){return l((function(e){return!e}))},children:[Object(r.jsx)(b.p,{children:Object(r.jsx)(R.a,{icon:Q.i})}),Object(r.jsxs)(b.o,{right:!0,children:[Object(r.jsx)(b.n,{className:"text-center",children:Object(r.jsx)(K.b,{to:"/profile",children:a.image?Object(r.jsx)("img",{style:{borderRadius:"10%"},height:"50px",alt:"",src:"https://omwdevs-dulldiary.s3.eu-west-2.amazonaws.com/staticfiles/".concat(a.image)}):Object(r.jsx)(R.a,{icon:Q.i,style:{width:"100%",height:"100%"}})})}),Object(r.jsx)("div",{style:{padding:"0 10px"},children:"google"===a.provider?Object(r.jsx)(Z,{}):Object(r.jsx)(H,{})})]})]})]})})})})),ne=Object(N.b)((function(e){return{entryModalShowing:e.entry.entryModalShowing,editingState:e.entry.editingState,entryToEdit:e.entry.entryToEdit}}),(function(e){return{entryModalToggle:function(){return e(X())},setModalEditData:function(t){return e(P(t))},singleCUEntryToStore:function(t){return e(function(e){return{type:k,entry:e}}(t))}}}))((function(e){var t=e.singleCUEntryToStore,n=e.setModalEditData,s=e.entryModalToggle,i=e.entryModalShowing,o=e.editingState,j=e.entryToEdit,h=Object(c.useState)(""),p=Object(d.a)(h,2),f=p[0],O=p[1],m=Object(c.useState)({message:"",theme:"info"}),x=Object(d.a)(m,2),g=x[0],v=x[1],y=Object(c.useState)(!1),w=Object(d.a)(y,2),k=w[0],S=w[1];Object(c.useEffect)((function(){return i||n("clear"),function(){v({message:"",theme:"info"}),S(!1)}}),[i]),Object(c.useEffect)((function(){O(o?j.content:"")}),[o,j]);var E=function(){var e=Object(u.a)(l.a.mark((function e(){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.post("api/entries/",{title:"testing",content:f});case 3:n=e.sent,v({message:"All Done",theme:"info"}),t(n.data),e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(0),!(r=e.t0.response.data).detail){e.next=13;break}return e.abrupt("return",v({message:r.detail,theme:"warning"}));case 13:for(c in r)v({message:r[c][0],theme:"warning"});case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(l.a.mark((function e(){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.patch("api/entries/".concat(j.id,"/"),{title:"another test title",content:f});case 3:n=e.sent,v({message:"Sweet, all done",theme:"info"}),t(n.data),e.next=13;break;case 8:for(c in e.prev=8,e.t0=e.catch(0),(r=e.t0.response.data).detail&&v({message:r.detail,theme:"warning"}),r)v({message:r[c][0],theme:"warning"});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(a.a.Fragment,{children:[k?Object(r.jsx)("div",{style:{backgroundColor:"rgba(51, 51, 51, 0.8)",height:"100vh",width:"100vw",position:"fixed",zIndex:"3",backdropFilter:"blur(5px)"},children:" "}):null,Object(r.jsxs)(b.u,{showModal:function(){return S(!0)},centered:!0,open:i,toggle:function(){return s()},children:[Object(r.jsx)(b.w,{children:o?"couldn't get boring enough?":"so what boring things happened today?"}),Object(r.jsxs)(b.v,{children:[Object(r.jsxs)(b.z,{className:"justify-content-around",children:[Object(r.jsx)("h6",{children:"Dear Diary, "}),Object(r.jsx)("h6",{children:(new Date).toLocaleDateString()})]}),Object(r.jsx)(b.t,{size:"md",value:f,onChange:function(e){return O(e.target.value)}}),o?Object(r.jsx)(b.c,{onClick:C,children:"Update"}):Object(r.jsx)(b.c,{onClick:E,children:"Post"})]}),g.message?Object(r.jsx)(U,{theme:g.theme,message:g.message}):null]})]})})),re=function(e){var t=Object(O.g)();return Object(r.jsxs)(a.a.Fragment,{children:[!["/","/login","/validate"].includes(t.pathname)&&Object(r.jsx)(te,{}),Object(r.jsx)(ne,{}),Object(r.jsx)("div",{style:{backgroundColor:"rgba(51, 51, 51, 0.02)",position:"relative",top:"60px"},children:e.children})]})},ce=Object(O.h)((function(e){e.history;var t=Object(c.useContext)(m),n=t.contextValue,a=(t.setContextValue,function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(d.a)(a,2),i=s[0],o=s[1];return[n,i,function(e,t){r(e),o(t)}]}()),s=Object(d.a)(a,3),i=s[0],o=s[1],j=s[2],h=Object(c.useState)(""),p=Object(d.a)(h,2),O=p[0],x=p[1],g=Object(c.useState)(!1),v=Object(d.a)(g,2),y=v[0],w=v[1],k=Object(c.useState)(!1),S=Object(d.a)(k,2),E=S[0],C=S[1];Object(c.useEffect)((function(){return document.addEventListener("visibilitychange",_),function(){return document.removeEventListener("visibilitychange",_)}}),[]);var _=function(){document.hidden||window.location.reload()},N=function(){var e=Object(u.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),t=O||n.email,j(!0,"Sending email"),e.prev=3,e.next=6,f.a.post("http://dulldiary-dev.eu-west-2.elasticbeanstalk.com/api/auth/new-confirm-password/",{email:t});case 6:r=e.sent,j(!1,r.data.detail),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),j(!1,e.t0.data.detail);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{children:Object(r.jsxs)(b.l,{className:"mt-3",children:[Object(r.jsx)(b.z,{children:Object(r.jsxs)(b.j,{children:[" ",Object(r.jsx)(H,{})]})}),Object(r.jsx)(b.z,{children:Object(r.jsx)(b.j,{className:"my-3",children:Object(r.jsx)("h1",{style:{textAlign:"center"},children:"Confirm Email"})})}),Object(r.jsxs)(b.z,{children:[Object(r.jsx)(b.j,{xs:"7",children:Object(r.jsx)(b.c,{block:!0,onClick:N,children:"Request New Email"})}),Object(r.jsx)(b.j,{xs:"5",children:Object(r.jsx)(b.c,{block:!0,onClick:function(){w((function(e){return!e}))},children:"Not Working?"})})]}),Object(r.jsx)(b.z,{children:Object(r.jsx)(b.j,{children:Object(r.jsx)(b.k,{open:y,children:Object(r.jsx)(b.q,{onSubmit:function(e){e.preventDefault(),N()},children:Object(r.jsx)(b.r,{className:"mt-3",placeholder:"Enter your email address in here",type:"text",value:O,onChange:function(e){return x(e.target.value)}})})})})}),o?Object(r.jsx)(b.z,{children:Object(r.jsxs)(b.j,{children:[Object(r.jsx)(b.a,{theme:"info",className:"mt-3",fade:!0,dismissible:function(){return C((function(e){return!e}))},open:E,children:Object(r.jsx)(b.l,{children:Object(r.jsxs)(b.z,{children:[Object(r.jsx)(b.j,{children:o}),Object(r.jsx)(b.j,{children:i?Object(r.jsx)(B,{style:{width:"20px",height:"20px"}}):null})]})})}),"  "]})}):null]})})})),ae=function(){return Object(r.jsx)(b.l,{className:"p-5",children:Object(r.jsxs)(b.z,{className:"justify-content-center text-center ",children:[Object(r.jsxs)("p",{children:["A few years ago I read a study which sparked the idea for ",Object(r.jsx)("strong",{children:"DullDiary"})," "]}),Object(r.jsxs)("p",{children:["Basically, it concluded that after reading diary entries of people from around the world, there was a ",Object(r.jsx)("strong",{children:"significant drop"})," in ",Object(r.jsx)("strong",{children:"intolerant"})," and ",Object(r.jsx)("strong",{children:"racist"})," attitudes, compared with the control group who had read diary entries from ",Object(r.jsx)("strong",{children:"people within their own"})," culture. "]}),Object(r.jsxs)("p",{children:["The explanation given is both ",Object(r.jsx)("strong",{children:"simple and intuitive"}),". By reading the dull, day in day out habits, worries and passtimes of humans cross-culturally, the similarities between groups becomes clear and stereotypical views of the vast ",Object(r.jsx)("strong",{children:"differences"})," between groups ",Object(r.jsx)("strong",{children:"disappears"}),". Reading about the troubled love life, work difficulties or simple day dreams of a stranger no doubt ",Object(r.jsx)("strong",{children:"humanises"})," them."]}),Object(r.jsxs)("p",{children:["A DullDiary entry is also limited to one post a day. The ",Object(r.jsx)("strong",{children:"democratisation of speech"})," online through social media has given previously ",Object(r.jsx)("strong",{children:"unreachable"})," people a voice. While a boon for the ",Object(r.jsx)("strong",{children:"under-represented"}),", the free cost of making yourself heard can lead to",Object(r.jsx)("strong",{children:"quantity"})," of speech over ",Object(r.jsx)("strong",{children:"quality"}),". The idea here is that only having one thing to post a day would make people ",Object(r.jsx)("strong",{children:"stop and think "}),"for a moment about the content."]})]})})},se=n(86),ie=n.n(se),oe=n(87),le=n.n(oe),ue=function(e){var t=e.created,n=e.country,a=e.title,s=e.countryName,i=e.identifier,o=e.content,l=e.random,u=Object(c.useState)(!1),j=Object(d.a)(u,2),h=j[0],p=j[1];return Object(r.jsxs)(b.f,{style:{width:"180px",height:"100px",position:"relative",boxShadow:"none"},className:"mr-3 my-auto p-2",children:[Object(r.jsxs)(b.i,{className:"p-1 d-flex align-items-center justify-content-between",style:{backgroundColor:"#99".concat(9*Math.floor(Math.random))},children:[Object(r.jsx)("div",{onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},id:"flag".concat(i).concat(l),children:Object(r.jsx)("img",{src:"https://omwdevs-dulldiary.s3.eu-west-2.amazonaws.com/staticfiles/flags/".concat(n.toLowerCase(),".gif"),style:{height:"20px"}})}),Object(r.jsx)(b.x,{toggle:p,placement:"top",open:h,target:"#flag".concat(i).concat(l),children:Object(r.jsx)(b.y,{children:s})}),Object(r.jsx)("p",{className:"m-0 text-dark",children:t})]}),Object(r.jsx)("p",{className:"font-weight-bold text-capitalize m-0 ml-1",children:a.slice(0,15)}),Object(r.jsxs)("p",{className:"m-0 ml-1 p-0",children:[o.slice(0,25),"..."]})]})},de=a.a.memo((function(e){var t=e.list,n=e.title,a=e.emptyMessage,s=Object(c.useState)([]),i=Object(d.a)(s,2),o=i[0],j=i[1],b=Object(c.useState)(!1),h=Object(d.a)(b,2),p=h[0],f=h[1];Object(c.useEffect)((function(){0!==t.length&&O()}),[]);var O=function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,t.map((function(e){try{return D(e)}catch(t){return void console.log(t)}}));case 3:return n=e.sent,e.t0=j,e.next=7,Promise.all(n);case 7:e.t1=e.sent,(0,e.t0)(e.t1),setTimeout((function(){f(!1)}),100);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h6",{className:"mt-4",children:n}),Object(r.jsx)("div",{className:[le.a.CarouselContainer,"mb-5"].join(" "),children:Object(r.jsxs)("div",{className:le.a.CarouselInner,children:[0===o.length&&a,o.map((function(e,t){if(p)return Object(r.jsx)("div",{style:{height:"110px",width:"80px"},className:"d-flex align-items-center justify-content-center",children:Object(r.jsx)(B,{})},t);var n=Math.floor(1e5*Math.random()),c=e.data;return Object(r.jsx)(ue,{random:n,identifier:t,content:c.content,created:c.created,appreciatedCount:c.stats.appreciated_count,changedPerc:c.stats.changed_perceptions_count,country:c.user_country,countryName:c.user_country_name,title:c.title},t)}))]})})]})})),je=Object(N.b)(null,(function(e){return{entryModalToggle:function(){return e(X())}}}))((function(e){var t=e.entryModalToggle,n=e.countryOptions,a=e.profileData,s=e.setProfileData,i=Object(c.useState)("Select your country"),o=Object(d.a)(i,2),j=(o[0],o[1]),h=Object(c.useState)(""),p=Object(d.a)(h,2),f=p[0],O=p[1];Object(c.useEffect)((function(){a.country&&(j(a.country.name),O(a.country.code))}),[a.country]);var m=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===f){e.next=11;break}return e.prev=1,O(t),e.next=5,D.patch("api/users/".concat(a.username||a.email,"/"),{country:t});case 5:n=e.sent,s(n.data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),x=[];if(n){var g=function(e){x.push(Object(r.jsx)("option",{selected:e===f,value:e,onClick:function(){return O(e)},children:n[e]},e))};for(var v in n)g(v);x.splice(0,0,Object(r.jsx)("option",{selected:"GB",value:"GB",onClick:function(){return O("GB")},children:"United Kingdom"},"GB2"))}return Object(r.jsx)(b.e,{className:"m-auto",children:Object(r.jsxs)(b.z,{className:"d-flex",children:[Object(r.jsx)(b.c,{block:!0,onClick:t,children:Object(r.jsx)("h6",{className:"m-0",children:"Add Todays Entry"})}),Object(r.jsx)(b.s,{size:"lg",placeholder:"yo",onClick:function(e){return m(e.target.value)},children:x})]})})})),be=Object(N.b)((function(e){return{profileData:e.profile.profileData}}),(function(e){return{setProfileData:function(t){return e(function(e){return{type:C,data:e}}(t))}}}))((function(e){var t=e.setProfileData,n=e.profileData,a=Object(c.useContext)(m),s=a.contextValue,i=(a.setContextValue,Object(c.useState)(null)),o=Object(d.a)(i,2),j=(o[0],o[1]),h=Object(c.useState)(null),p=Object(d.a)(h,2),f=p[0],O=p[1],x=Object(c.useState)(!1),g=Object(d.a)(x,2),v=g[0],y=g[1],w=Object(c.useState)(""),k=Object(d.a)(w,2),S=k[0],E=k[1],C=Object(c.useState)(!1),_=Object(d.a)(C,2),N=_[0],T=_[1],A=Object(c.useState)(!1),M=Object(d.a)(A,2),z=M[0],I=M[1],F=Object(c.useState)(!1),U=Object(d.a)(F,2),L=U[0],q=U[1],X=Object(c.useState)(null),P=Object(d.a)(X,2),G=P[0],Y=P[1],V=Object(c.useState)(!1),H=Object(d.a)(V,2),W=H[0],Z=H[1],K=Object(c.useState)(!1),$=Object(d.a)(K,2),ee=$[0],te=$[1];Object(c.useEffect)((function(){ne(),re()}),[]);var ne=function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,D.get("api/users/".concat(s.username||s.email,"/"));case 4:n=e.sent,t(n.data),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:j(!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.get("api/auth/country_list/");case 3:t=e.sent,Y(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(""),t={"content-type":"multipart/form-data"},(n=new FormData).append("image",f,f.name),"image/jpeg"!==f.type&&E("Image must be a JPEG"),S){e.next=17;break}return te(!0),e.prev=7,e.next=10,D.patch("api/users/".concat(s.username||s.email,"/upload-profile-image/"),n,t);case 10:e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7);try{"Request Entity Too Large"===e.t0.response.statusText&&E("Please upload a smaller image")}catch(r){}case 16:ne();case 17:te(!1);case 18:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(){return e.apply(this,arguments)}}(),ae=Object(r.jsx)(B,{});return""!==n.username&&(ae=Object(r.jsxs)("div",{style:{maxWidth:"600px",margin:"auto"},children:[Object(r.jsx)(de,{list:n.appreciated_entry_list,emptyMessage:"Nope, nada",title:"Your appreciated entries"}),Object(r.jsx)(de,{list:n.changed_perception_list,emptyMessage:"All empty here",title:"Some entries that changed your mind"})]})),Object(r.jsxs)(b.l,{className:[ie.a.Background,"pt-5"].join(" "),children:[Object(r.jsx)(b.z,{className:"mb-5",sm:{size:8,offset:2},children:Object(r.jsx)("div",{style:{width:"300px",margin:"auto"},children:Object(r.jsx)(je,{countryOptions:G,profileData:n,setProfileData:t})})}),Object(r.jsx)(b.z,{className:"justify-content-center",children:Object(r.jsxs)("div",{style:{position:"relative"},onMouseEnter:function(){return y(!0)},onMouseLeave:function(){return y(!1)},children:[ee&&Object(r.jsx)(B,{}),n.image?Object(r.jsx)("img",{className:v?ie.a.ImageHover:null,style:{margin:"auto",borderRadius:"10px",position:"relative",minHeight:"150px",maxHeight:"250px",maxWidth:"250px",minWidth:"150px"},src:n.image||"s3://omwdevs-dulldiary/staticfiles/".concat(s.image,"/"),alt:"YoFaceEre"}):Object(r.jsx)("div",{style:{margin:"auto",borderRadius:"10px",position:"relative",height:"200px",width:"200px",backgroundColor:"#999",display:"flex",alignItems:"center",justifyContent:"center"},src:n.image||"s3://omwdevs-dulldiary/staticfiles/".concat(s.image,"/"),alt:"YoFaceEre",children:Object(r.jsx)(b.c,{outline:!0,theme:"info",onClick:function(){return T((function(e){return!e}))},children:Object(r.jsx)(R.a,{icon:Q.f})})}),v?Object(r.jsx)(b.c,{outline:!0,theme:"info",onClick:function(){return T((function(e){return!e}))},style:{position:"absolute",top:"15px",right:"15px",margin:"0",padding:"10px"},children:Object(r.jsx)(R.a,{size:"1x",icon:Q.c})}):null,Object(r.jsx)(b.b,{theme:"info",id:"dateJoinedToolTip",style:{position:"absolute",bottom:"-15px",right:"-15px"},children:Object(r.jsx)("h6",{className:"m-0",children:s.email})}),Object(r.jsx)(b.A,{open:L,toggle:function(){return q((function(e){return!e}))},target:"#dateJoinedToolTip",children:n.date_joined?"You joined on ".concat(n.date_joined.split(", ")[0],"... at ").concat(n.date_joined.split(", ")[1]," if you're interested"):null}),Object(r.jsx)(b.b,{theme:"info",id:"countryNameToolTip",style:{position:"absolute",bottom:"15px",left:"-25px"},children:n.country.code?Object(r.jsx)(J.a,{countryCode:n.country.code,svg:!0,style:{fontSize:"3rem",lineHeight:"3rem"}}):null}),Object(r.jsx)(b.A,{open:W,toggle:function(){return Z((function(e){return!e}))},target:"#countryNameToolTip",children:n.country.name}),Object(r.jsx)(b.b,{theme:"info",id:"entriesToolTip",style:{position:"absolute",top:"-15px",left:"-15px"},children:Object(r.jsxs)("h6",{className:"m-0",children:[" ",n.entryset?n.entryset.length:null]})}),Object(r.jsx)(b.A,{open:z,toggle:function(){return I((function(e){return!e}))},target:"#entriesToolTip",children:n.entryset?"You have written ".concat(n.entryset.length," entries"):null})]})}),Object(r.jsxs)(b.k,{open:N,children:[Object(r.jsx)(b.z,{className:"justify-content-center mt-5 ",children:Object(r.jsxs)(b.q,{onSubmit:function(e){e.preventDefault(),f&&ce()},children:[Object(r.jsx)(b.r,{type:"file",onChange:function(e){return O(e.target.files[0])}}),Object(r.jsx)(b.j,{children:Object(r.jsxs)(b.d,{className:"w-100",children:[Object(r.jsx)(b.c,{className:"mt-2",type:"submit",children:"Upload"}),Object(r.jsx)(b.c,{onClick:function(){return T((function(e){return!e}))},className:"mt-2 px-1",children:"Hide"})]})}),Object(r.jsx)(b.j,{xs:"4"})]})}),S&&Object(r.jsx)(b.a,{theme:"warning",style:{marginTop:"10px"},children:S})]}),n.username?Object(r.jsx)("div",{className:"mt-5",style:{maxWidth:"600px",margin:"auto"},children:Object(r.jsx)(de,{emptyMessage:"You haven't added any entries",list:n.entryset,title:"Your own entries"})}):null,ae]})})),he=Object(N.b)((function(e){return{token:e.auth.idToken}}),(function(e){return{setToken:function(t){return e(_(t))}}}))((function(e){var t=e.setToken,n=e.token,a={refreshToken:null,email:null,username:null,validated:null,expires:null,provider:null},s=Object(h.useGoogleLogout)({clientId:"106189049607-3rhlmgu5rmvsnr8kf7fnh3vvs8hts08l.apps.googleusercontent.com"}).signOut,i=Object(c.useState)(a),o=Object(d.a)(i,2),j=o[0],b=o[1],p=Object(c.useState)(!1),x=Object(d.a)(p,2),g=x[0],v=x[1],y=Object(c.useState)(!1),w=Object(d.a)(y,2),k=(w[0],w[1],Object(c.useState)(!1)),S=Object(d.a)(k,2),E=(S[0],S[1]),C=Object(c.useMemo)((function(){return{contextValue:j,setContextValue:b}}),[j,b]);return Object(c.useEffect)((function(){!1===j.validated&&E(!0)}),[j.validated]),Object(c.useEffect)((function(){if(g){var e=setInterval((function(){Math.round(Date.now()/1e3)>j.expires&&("google"===j.provider&&s(),b(a),t(null),localStorage.removeItem("refresh_token"),localStorage.removeItem("refresh_expires"),v(!1))}),1e3);return function(){clearInterval(e),v(!1)}}}),[g,j.expires]),Object(c.useEffect)((function(){if(null!==j.expires){var e=Math.round(Date.now()/1e3),t=j.expires-e-60,n=setTimeout((function(){v(!0)}),1e3*t);return function(){clearTimeout(n)}}}),[j.expires]),Object(c.useEffect)((function(){var e=n,r=D.interceptors.request.use((function(t){return null!==e&&(t.headers.Authorization="JWT ".concat(e)),t}),(function(e){return Promise.reject(e)})),c=D.interceptors.response.use((function(e){return e}),function(){var n=Object(u.a)(l.a.mark((function n(r){var c,a,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=r.config,401!==r.response.status||c._retry){n.next=11;break}return c._retry=!0,n.next=5,f.a.post("http://dulldiary-dev.eu-west-2.elasticbeanstalk.com/api/auth/refresh/",{refresh:localStorage.getItem("refresh_token")});case 5:return a=n.sent,s=a.data.access,t(s),e=s,r.response.config.headers.Authorization="JWT "+s,n.abrupt("return",D(c));case 11:return n.abrupt("return",Promise.reject(r));case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return function(){D.interceptors.request.eject(r),D.interceptors.request.eject(c)}}),[]),Object(r.jsx)(K.a,{children:Object(r.jsxs)(m.Provider,{value:C,children:[!n&&Object(r.jsx)(O.a,{to:"/"}),n&&!j.validated&&Object(r.jsx)(O.a,{to:"/validate"}),Object(r.jsxs)(re,{children:[g?Object(r.jsx)(U,{time:60,theme:"warning",message:"For security reasons you will be logged out within a minute. Please save anything you need to then log in again. Thanks"}):null,Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)("div",{children:"Loading"}),children:Object(r.jsxs)(O.d,{children:[Object(r.jsx)(O.b,{path:"/login",component:q}),Object(r.jsx)(O.b,{exact:!0,path:"/",children:Object(r.jsx)(O.a,{to:"/login"})}),Object(r.jsx)(O.b,{path:"/validate",component:ce}),Object(r.jsx)(O.b,{path:"/profile",component:be}),Object(r.jsx)(O.b,{path:"/about",component:ae}),Object(r.jsx)(O.b,{path:"/create",component:ne}),Object(r.jsx)(O.b,{path:"/entries",component:V}),Object(r.jsx)(O.a,{to:"/login"})]})})]})]})})})),pe=n(36),fe=n(117),Oe={idToken:null},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(j.a)(Object(j.a)({},e),{},{idToken:t.token});default:return e}},xe=n(38),ge={loadedEntries:[],entryModalShowing:!1,editingState:!1,entryToEdit:{}},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(j.a)(Object(j.a)({},e),{},{entryModalShowing:!e.entryModalShowing});case E:return Object(j.a)(Object(j.a)({},e),{},{loadedEntries:e.loadedEntries.filter((function(e){return e.id!==t.id}))});case k:var n=t.entry;console.log(n);var r=e.loadedEntries.findIndex((function(e){return e.id===n.id}));if(-1===r)return Object(j.a)(Object(j.a)({},e),{},{loadedEntries:[t.entry].concat(e.loadedEntries)});var c=Object(xe.a)(e.loadedEntries);return c[r]=n,c[r].stats=n.stats,console.log(c),Object(j.a)(Object(j.a)({},e),{},{loadedEntries:c});case w:return"clear"===t.entry?Object(j.a)(Object(j.a)({},e),{},{editingState:!1,entryToEdit:{}}):Object(j.a)(Object(j.a)({},e),{},{editingState:!0,entryToEdit:t.entry});case g:return t.data?Object(j.a)(Object(j.a)({},e),{},{loadedEntries:Object(xe.a)(e.loadedEntries.concat(t.data.filter((function(e){return null!==e}))))}):e;case v:return Object(j.a)(Object(j.a)({},e),{},{loadedEntries:[]});case S:return"appreciated"===t.statType?Object(j.a)(Object(j.a)({},e),{},{loadedEntries:e.loadedEntries.map((function(e){return e.id===t.id?Object(j.a)(Object(j.a)({},e),{},{stats:Object(j.a)(Object(j.a)({},e.stats),{},{is_appreciated_by_user:!e.stats.is_appreciated_by_user,appreciated_count:e.stats.is_appreciated_by_user?e.stats.appreciated_count-1:e.stats.appreciated_count+1})}):Object(j.a)({},e)}))}):Object(j.a)(Object(j.a)({},e),{},{loadedEntries:e.loadedEntries.map((function(e){return e.id===t.id?Object(j.a)(Object(j.a)({},e),{},{stats:Object(j.a)(Object(j.a)({},e.stats),{},{changed_perc_of_user:!e.stats.changed_perc_of_user,changed_perceptions_count:e.stats.changed_perc_of_user?e.stats.changed_perceptions_count-1:e.stats.changed_perceptions_count+1})}):Object(j.a)({},e)}))});default:return e}},ye={profileData:{appreciated_entry_count:0,appreciated_entry_list:[],changed_perception_count:0,changed_perception_list:[],date_joined:"",entryset:[],image:"",username:"",email:"",country:""}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:var n=t.data;return Object(j.a)(Object(j.a)({},e),{},{profileData:{appreciated_entry_count:n.appreciated_entries.count,appreciated_entry_list:Object(xe.a)(n.appreciated_entries.list),changed_perception_count:n.changed_perception.count,changed_perception_list:Object(xe.a)(n.changed_perception.list),date_joined:n.date_joined,entryset:Object(xe.a)(n.entryset),image:n.image,username:n.username,email:n.email,country:n.country}});default:return e}},ke=Object(pe.c)({auth:me,entry:ve,profile:we}),Se=Object(pe.d)(ke,Object(pe.a)(fe.a));i.a.render(Object(r.jsxs)(N.a,{store:Se,children:[" ",Object(r.jsx)(he,{})]}),document.getElementById("root"))},64:function(e,t,n){e.exports={Badge:"Navbar_Badge__1wHDS",H21:"Navbar_H21__V5lXl",H22:"Navbar_H22__1k7jE",Active:"Navbar_Active__14Rjp",MainNav:"Navbar_MainNav__1jOUx",InnerNav:"Navbar_InnerNav__32j9F"}},86:function(e,t,n){e.exports={Background:"Profile_Background__2ZKLJ"}},87:function(e,t,n){e.exports={CarouselContainer:"EntryCarousel_CarouselContainer__1FnAH",CarouselInner:"EntryCarousel_CarouselInner__1g8B1"}}},[[222,1,2]]]);
//# sourceMappingURL=main.83da528d.chunk.js.map